{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>I.A.R.A</title>
    <link rel="stylesheet" href="{% static 'assets/css/global.css' %}" />
    <link rel="stylesheet" href="{% static 'css/output.css' %}">
  </head>
  <body
    class="flex justify-between p-12 gap-10 items-center bg-[#1B262C] min-h-screen w-screen"
  >
    <div
      class="relative w-[40vw] h-[85vh] bg-gradient-to-b from-[#3E397C] to-[#2D2960] rounded-2xl shadow-2xl overflow-hidden flex flex-col"
    >
      <!-- Camera -->
      <div
        class="absolute inset-0 flex flex-col items-center justify-center text-white/50 z-0 pb-48"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="64"
          height="64"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="mb-4 opacity-70"
        >
          <path d="M17 8h1a4 4 0 1 1 0 8h-1"></path>
          <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"></path>
          <line x1="6" y1="2" x2="6" y2="4"></line>
          <line x1="10" y1="2" x2="10" y2="4"></line>
          <line x1="14" y1="2" x2="14" y2="4"></line>
        </svg>
        <p class="text-lg font-semibold">Câmera desligada</p>
        <p class="text-sm italic opacity-60">
          Erro 418: Eu sou um bule de chá (Hora do café)
        </p>
      </div>

      <!-- Remova ou comente esta classe: transform scale-x-[-1] -->
      <video
      id="videoElement"
      autoplay
      playsinline
      class="absolute inset-0 w-full h-full object-cover z-10"
      style="display: none"
      ></video>

      <!-- Tradução -->
      <div class="absolute bottom-24 left-4 right-4 z-20">
        <div
          class="bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 shadow-lg min-h-[100px] flex items-center justify-center transition-all duration-300"
        >
          <p id="response" class="text-white text-center text-lg font-medium animate-pulse">
            Aguardando sinais...
          </p>
        </div>
      </div>

      <!-- Menu -->
      <div class="absolute bottom-6 left-1/2 -translate-x-1/2 z-30">
        <div
          class="w-[285px] h-[60px] bg-[#C4BFFF] rounded-full flex items-center justify-center gap-16 shadow-xl hover:shadow-2xl transition-shadow duration-300"
        >
          <button onclick="startCamera()" class="group focus:outline-none">
            <div
              class="p-2 rounded-full group-hover:bg-white/20 transition duration-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="drop-shadow-sm group-hover:scale-110 transition-transform"
              >
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </div>
          </button>

          <button onclick="stopCamera()" class="group focus:outline-none">
            <div
              class="p-2 rounded-full group-hover:bg-white/20 transition duration-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="white"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="drop-shadow-sm group-hover:scale-110 transition-transform"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              </svg>
            </div>
          </button>
        </div>
      </div>
    </div>

    <div
      class="relative w-[40vw] min-w-[350px] h-[85vh] bg-gradient-to-b from-[#3E397C] to-[#2D2960] rounded-2xl shadow-2xl overflow-hidden flex flex-col"
    >
      <div
        id="textPlaceholder"
        class="absolute inset-0 flex flex-col items-center justify-center text-white/50 z-0 pb-32 transition-opacity duration-300"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="64"
          height="64"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="mb-4 opacity-70"
        >
          <path
            d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
          ></path>
          <line x1="9" y1="10" x2="15" y2="10"></line>
          <line x1="9" y1="14" x2="13" y2="14"></line>
        </svg>
        <p class="text-lg font-semibold">Aguardando texto</p>
        <p class="text-sm italic opacity-60">
          Digite abaixo para traduzir em sinais
        </p>
      </div>

      <div
        id="signImagesContainer"
        class="absolute inset-0 z-10 flex flex-col items-center justify-center gap-4 p-8 overflow-x-auto hidden scrollbar-hide"
      ></div>

      <div class="absolute bottom-6 left-4 right-4 z-30">
        <div
          class="bg-white/10 backdrop-blur-md border border-white/20 rounded-full h-[60px] flex items-center justify-between pl-6 pr-2 shadow-xl transition-all duration-300 focus-within:border-white/40 focus-within:bg-white/15"
        >
          <input
            type="text"
            id="textInput"
            placeholder="Digite sua frase aqui..."
            class="bg-transparent border-none outline-none text-white placeholder-white/50 flex-1 text-lg h-full"
            onkeypress="handleKeyPress(event)"
          />

          <button
            onclick="stopTranslate()"
            class="bg-[#C4BFFF] hover:bg-[#D1CEFF] text-[#3E397C] p-3 rounded-full transition-transform hover:scale-105 focus:outline-none active:scale-95 ml-2"
          >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="drop-shadow-sm group-hover:scale-110 transition-transform"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              </svg>
          </button>

          <button
            onclick="translateText()"
            class="bg-[#C4BFFF] hover:bg-[#D1CEFF] text-[#3E397C] p-3 rounded-full transition-transform hover:scale-105 focus:outline-none active:scale-95 ml-2"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <script>
      const imgBaseUrl = "{% static 'assets/sinais/' %}";
    </script>

    <script src="{% static 'javascript/camera.js' %}"></script>
  </body>
</html>
